.TH   "" "" ""
.SH NAME
 \- 
.\" Man page generated from reStructeredText.
.
.SH SYNOPSIS
.sp
Trigger a puppetd run on a set of hosts.
.SH USAGE
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.TP
.B puppetrun [\-a|\-\-all] [\-c|\-\-class <class>] [\-d|\-\-debug] [\-f|\-\-foreground]
.
[\-h|\-\-help] [\-\-host <host>] [\-\-no\-fqdn] [\-\-ignoreschedules]
[\-t|\-\-tag <tag>] [\-\-test] [\-p|\-\-ping]
.UNINDENT
.UNINDENT
.UNINDENT
.SH DESCRIPTION
.sp
This script can be used to connect to a set of machines running
+puppetd+ and trigger them to run their configurations. The most common
usage would be to specify a class of hosts and a set of tags, and
+puppetrun+ would look up in LDAP all of the hosts matching that class,
then connect to each host and trigger a run of all of the objects with
the specified tags.
.sp
If you are not storing your host configurations in LDAP, you can specify
hosts manually.
.sp
You will most likely have to run +puppetrun+ as root to get access to
the SSL certificates.
.sp
+puppetrun+ reads +puppetmaster+\(aqs configuration file, so that it can
copy things like LDAP settings.
.SH USAGE NOTES
.sp
+puppetrun+ is useless unless +puppetd+ is listening. See its
documentation for more information, but the gist is that you must enable
+listen+ on the +puppetd+ daemon, either using +\-\-listen+ on the command
line or adding \(aqlisten: true\(aq in its config file. In addition, you need
to set the daemons up to specifically allow connections by creating the
+namespaceauth+ file, normally at \(aq/etc/puppet/namespaceauth.conf\(aq. This
file specifies who has access to each namespace; if you create the file
you must add every namespace you want any Puppet daemon to allow \-\- it
is currently global to all Puppet daemons.
.sp
An example file looks like this:
.sp
.nf
.ft C
[fileserver]
    allow *.madstop.com

[puppetmaster]
    allow *.madstop.com

[puppetrunner]
    allow culain.madstop.com
.ft P
.fi
.sp
This is what you would install on your Puppet master; non\-master hosts
could leave off the \(aqfileserver\(aq and \(aqpuppetmaster\(aq namespaces.
.sp
Expect more documentation on this eventually.
.SH OPTIONS
.sp
Note that any configuration parameter that\(aqs valid in the configuration
file is also a valid long argument. For example, \(aqssldir\(aq is a valid
configuration parameter, so you can specify \(aq\-\-ssldir <directory>\(aq as an
argument.
.sp
See the configuration file documentation at
\fI\%http://reductivelabs.com/projects/puppet/reference/configref.html\fP for
the full list of acceptable parameters. A commented list of all
configuration options can also be generated by running puppetmasterdd
with \(aq\-\-genconfig\(aq.
.INDENT 0.0
.TP
.B all:             Connect to all available hosts. Requires LDAP support
.
at this point.
.TP
.B class:           Specify a class of machines to which to connect. This
.
only works if you have LDAP configured, at the moment.
.UNINDENT
.sp
debug:           Enable full debugging.
.INDENT 0.0
.TP
.B foreground:      Run each configuration in the foreground; that is, when
.
connecting to a host, do not return until the host has
finished its run. The default is false.
.UNINDENT
.sp
help:            Print this help message
.INDENT 0.0
.TP
.B host:            A specific host to which to connect. This flag can be
.
specified more than once.
.TP
.B ignoreschedules: Whether the client should ignore schedules when running
.
its configuration. This can be used to force the client
to perform work it would not normally perform so soon.
The default is false.
.TP
.B parallel:        How parallel to make the connections. Parallelization
.
is provided by forking for each client to which to
connect. The default is 1, meaning serial execution.
.TP
.B tag:             Specify a tag for selecting the objects to apply. Does
.
not work with the \-\-test option.
.TP
.B test:            Print the hosts you would connect to but do not
.
actually connect. This option requires LDAP support at
this point.
.UNINDENT
.sp
ping:
.sp
.nf
.ft C
Do a ICMP echo against the target host. Skip hosts that don\(aqt respond to ping.
.ft P
.fi
.SH EXAMPLE
.INDENT 0.0
.INDENT 3.5
.sp
sudo puppetrun \-p 10 \-\-host host1 \-\-host host2 \-t remotefile \-t webserver
.UNINDENT
.UNINDENT
.SH AUTHOR
.sp
Luke Kanies
.SH COPYRIGHT
.sp
Copyright (c) 2005 Reductive Labs, LLC Licensed under the GNU Public
License
.\" Generated by docutils manpage writer.
.\" 
.
